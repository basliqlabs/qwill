---
title: 'چرا گوگل QUIC رو ساخت؟'
description: 'داستان پروتکلی که گوگل برای حل مشکلات خودش طراحی کرد و توسعه داد و حالا بخش بزرگی از اینترنت روی اون می‌چرخه'
publishDate: '2025-08-28'
updatedDate: null
coverImage:
  src: '/images/cover-quic-basics-fa.webp'
  alt: 'Photo by Gidon Wessner on Unsplash'
series: null
category: 'network'
collections: ['network', 'protocols', 'web', 'google']
authors: ['atareversei']
draft: false
outdated: false
external: false
fire: false
---

> [!WARNING] توجه  
> این مقاله با هدف ارائه‌ی مطالب به‌صورت خلاصه و روان نوشته شده و ممکنه از دقت کامل برخوردار نباشه.

## TCP دیگه جوابگو نبود

گوگل حدود **۱۵** سال پیش متوجه یه مشکل پرفورمنسی توی سرویسای سرچ و یوتیوبش می‌شه. اون مشکل هم این بوده که TCP با اینکه استاندارد جهانی وبه، ولی پاسخگوی نیازهای در حال رشد گوگل نبود. همین باعث شد که شروع کنن به گشتن دنبال راه‌حل‌های بهتر.

شاید براتون سؤال بشه: «TCP مگه استاندارد جهانی وب نیست؟ اصلاً چطور می‌شه بهبودش داد یا جایگزینی براش ساخت؟» کوچیک‌ترین تغییری در لایه‌های زیرین شبکه مستلزم پیاده‌سازی و پشتیبانی توسط همه‌ی تجهیزات زیرساختیه؛ از روتر و سوییچ گرفته تا فایروال و سرورها. پس چیکار می‌شه کرد؟

## راه‌حل گوگل: پروتکلی روی UDP

ما نمی‌تونیم به لایه‌های زیرین شبکه دست بزنیم، ولی دستمون برای ایجاد پروتکل تو لایه‌های بالاتر بازه. این همون کاریه که گوگل انجام داد.

پروتکل QUIC روی لایه‌ی UDP توسعه داده شد. برای همین مزایای این لایه رو با خودش به‌همراه داره، ولی برای معایب UDP هم باید خودش فکری بکنه. UDP خیلی سریعه ولی هیچ ضمانتی بابت تحویل بسته‌ها یا تکرار ارسال بسته‌های گم‌شده نمی‌ده و خود QUIC باید اینارو پیاده‌سازی کنه.

خب، پس اگه قراره امکاناتی که TCP به‌صورت پیش‌فرض بهمون می‌ده رو دوباره روی UDP پیاده کنیم، چرا اسمش رو TCP۲ نذاریم؟ چون همونه دیگه! (این دقیقاً اولین سؤالی بود که موقع مطالعه برای خود من پیش اومد.) جوابش اینه که TCP بی‌نقص نیست؛ می‌شه ایرادهاشو برطرف کرد و یه پروتکل خیلی بهینه‌تر ساخت.

علت اینکه TCP این موارد رو بهینه پیاده نکرده اینه که این پروتکل تو دهه‌ی **۱۹۸۰** طراحی شده و خیلی از کاربردهای امروزی رو پیش‌بینی نکرده بودن. از طرف دیگه چون TCP پروتکل لایه‌ی زیرینه و تو سیستم‌عامل پیاده‌سازی شده، تغییر دادنش راحت نیست. ولی QUIC چون عملاً در سطح کتابخونه و نرم‌افزاره، خیلی راحت می‌شه تغییرش داد، براش به‌روزرسانی منتشر کرد و دست آدم رو برای نوآوری باز گذاشته.

### تفاوت بزرگ با TCP: استریم‌های جداگانه

مثلاً پروتکل QUIC چند تا استریم برای دریافت اطلاعات داره، برعکس TCP که فقط یه صف دریافت داره. اگه بسته‌ای اون وسط گیر کنه و به سرور نرسه، تو TCP دیگه نمی‌شه داده‌های بعدی رو پردازش کرد و کانکشن عملاً منجمد می‌شه. ولی تو QUIC چون چند صف جدا داره، این اتفاق جلوی پردازش بقیه‌ی دیتا رو نمی‌گیره.

### کم کردن رفت‌و‌برگشت‌ها

TCP خودش **۳** مرحله رفت‌وبرگشت داره و از لایه‌ی TLS هم جداست که اونم **۴** مرحله به این روند اضافه می‌کنه. یعنی اگه سرور مقصد اون‌ور دنیا باشه، مرورگر یا برنامه‌ی من باید یه بار بفرسته اون‌ور دنیا (**۱**)، یه بار جواب رو از اون‌ور دنیا بگیره (**۲**) و این مذاکرات تا **۷** بار تکرار میشه. در حالی‌که QUIC این دوتا رو با هم یکی کرده و به **۳** مرحله رسونده.

![اگه فاصله بین کلاینت و سرور زیاد باشه، این هفت بار رفت و برگشت تبدیل به تاخیر قابل توجهی میشه.](/images/tcp-tls-handshake-rtt.webp)

### جزئیات هوشمندانه در طراحی

QUIC کلی جزئیات هوشمندانه داره. مثلاً استفاده از شناسه‌ی مخصوص ارتباط به‌جای IP و Port برای آدرس‌دهی (یعنی اگه وای‌فای رو خاموش کردی و با دیتای موبایل ادامه دادی، همون ارتباط برقرار می‌مونه چون وابسته به IP و Port نیست). یا استفاده از کانکشن‌های قبلی که رفت‌وبرگشت رو به صفر می‌رسونه.

## گوگل، استانداردسازی و HTTP/3

گوگل این پروتکل رو طی چند سال و با بودجه‌ی چند میلیارد دلاری توسعه داد و توی گوگل کروم (سمت کلاینت) و سرورهای یوتیوب و سرچ (سمت سرور) پیاده‌سازی کرد و شاهد افزایش پرفورمنس قابل توجهی شد. البته بعدها این پروتکل رو اوپن‌سورس کرد تا تبدیل به استاندارد بشه.

از اون‌طرف، لید ماجرا هم دست گوگل افتاد و HTTP/3 رو اجباراً روی QUIC پیاده‌سازی کردن. الان حدود **۲۵** درصد ترافیک اینترنت با این پروتکل منتقل می‌شه.

## تیزر قسمت بعدی

گوگل به‌قدری بزرگ و باعظمته که زودتر از همه به مشکلات مقیاس خیلی بزرگ می‌رسه و خودش مجبور می‌شه برای خودش راه‌حل بسازه. راه‌حل‌هایی که سال‌ها بعد تبدیل به استاندارد می‌شن. توی ادامه‌ی این سری پست‌ها، می‌خوام دقیق‌تر به جزئیات QUIC بپردازم، اینکه چطور دقیقا گوگل به فکر ساخت پروتکل جدید افتاد.
